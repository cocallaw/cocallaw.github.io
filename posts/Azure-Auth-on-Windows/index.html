<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Streamlining Azure CLI &amp; PowerShell Authentication on Windows 11" /><meta name="author" content="Corey Callaway" /><meta property="og:locale" content="en" /><meta name="description" content="Set up a secure and convenient Azure authentication workflow on a Windows 11 machine using Windows Credential Manager and PowerShell profiles." /><meta property="og:description" content="Set up a secure and convenient Azure authentication workflow on a Windows 11 machine using Windows Credential Manager and PowerShell profiles." /><link rel="canonical" href="https://cocallaw.com/posts/Azure-Auth-on-Windows/" /><meta property="og:url" content="https://cocallaw.com/posts/Azure-Auth-on-Windows/" /><meta property="og:site_name" content="cocallaw" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2026-01-10T12:00:00-05:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Streamlining Azure CLI &amp; PowerShell Authentication on Windows 11" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Corey Callaway" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Corey Callaway","url":"https://www.cocallaw.com/about/"},"dateModified":"2026-01-10T12:00:00-05:00","datePublished":"2026-01-10T12:00:00-05:00","description":"Set up a secure and convenient Azure authentication workflow on a Windows 11 machine using Windows Credential Manager and PowerShell profiles.","headline":"Streamlining Azure CLI &amp; PowerShell Authentication on Windows 11","mainEntityOfPage":{"@type":"WebPage","@id":"https://cocallaw.com/posts/Azure-Auth-on-Windows/"},"url":"https://cocallaw.com/posts/Azure-Auth-on-Windows/"}</script><title>Streamlining Azure CLI & PowerShell Authentication on Windows 11 | cocallaw</title><link rel="icon" type="image/png" href="/assets/img/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/svg+xml" href="/assets/img/favicons/favicon.svg"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.36.4/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.18/dayjs.min.js,npm/dayjs@1.11.18/locale/en.js,npm/dayjs@1.11.18/plugin/relativeTime.js,npm/dayjs@1.11.18/plugin/localizedFormat.js,npm/tocbot@4.36.4/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon='{"token": "b814618bb529402badb6aeea52009c22"}' ></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="https://ccblog-hxegfte6cpg4c7a3.z01.azurefd.net/general/profile.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">cocallaw</a><p class="site-subtitle fst-italic mb-0">Tech Tinkerings</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/cocallaw" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://www.linkedin.com/in/corey-callaway-1abbb227/" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Streamlining Azure CLI & PowerShell Authentication on Windows 11</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>Streamlining Azure CLI & PowerShell Authentication on Windows 11</h1><p class="post-desc fw-light mb-4">Set up a secure and convenient Azure authentication workflow on a Windows 11 machine using Windows Credential Manager and PowerShell profiles.</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1768064400" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jan 10, 2026 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://www.cocallaw.com/about/">Corey Callaway</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1172 words" > <em>6 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">Streamlining Azure CLI & PowerShell Authentication on Windows 11</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">Streamlining Azure CLI & PowerShell Authentication on Windows 11</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><p>I recently cleaned up my Windows 11 work machines and did a fresh install, OneDrive and <code class="language-plaintext highlighter-rouge">winget</code> made installing tools and pulling down configurations easy, I wanted to clean up how I authenticate with Azure when using the Az CLI and Azure PowerShell. I wanted something that was both secure and convenient for daily use and switching between accounts.</p><p>After some experimentation, I landed on a solution that uses Windows Credential Manager with PowerShell profiles to enable seamless authentication for both Az CLI and Azure PowerShell.</p><h2 id="the-problem"><span class="me-2">The Problem</span><a href="#the-problem" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>When working with Azure daily, you need:</p><ul><li>Quick, seamless authentication<li>Support for both Az CLI and Azure PowerShell<li>Ability to manage multiple service principals<li>Security (no plain text secrets lying around)</ul><h2 id="the-solution-windows-credential-manager--powershell-profile"><span class="me-2">The Solution: Windows Credential Manager + PowerShell Profile</span><a href="#the-solution-windows-credential-manager--powershell-profile" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Instead doing an interactive sign-in or storing secrets in environment variables, I’m using Windows Credential Manager to encrypt and store service principal credentials, then loading them automatically through my PowerShell profile.</p><h2 id="prerequisites-creating-a-service-principal"><span class="me-2">Prerequisites: Creating a Service Principal</span><a href="#prerequisites-creating-a-service-principal" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Before we set up authentication, you’ll need a service principal. Here’s how to create one with contributor permissions:</p><h3 id="using-azure-portal"><span class="me-2">Using Azure Portal</span><a href="#using-azure-portal" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li>Navigate to <strong>Azure Active Directory</strong> &gt; <strong>App registrations</strong> &gt; <strong>New registration</strong><li>Give it a name (e.g., “My-DevOps-SP”) and click <strong>Register</strong><li>Note the <strong>Application (client) ID</strong> and <strong>Directory (tenant) ID</strong><li>Go to <strong>Certificates &amp; secrets</strong> &gt; <strong>New client secret</strong><li>Add a description and expiration period, then click <strong>Add</strong><li><strong>Copy the secret value immediately</strong> (you won’t see it again!)</ol><h3 id="using-az-cli"><span class="me-2">Using Az CLI</span><a href="#using-az-cli" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c"># Create service principal with Contributor role at subscription level</span>
az ad sp create-for-rbac <span class="nt">--name</span> <span class="s2">"My-DevOps-SP"</span> <span class="nt">--role</span> Contributor <span class="nt">--scopes</span> /subscriptions/YOUR_SUBSCRIPTION_ID

<span class="c"># Output will show:</span>
<span class="c"># {</span>
<span class="c">#   "appId": "your-client-id",</span>
<span class="c">#   "displayName": "My-DevOps-SP",</span>
<span class="c">#   "password": "your-client-secret",</span>
<span class="c">#   "tenant": "your-tenant-id"</span>
<span class="c"># }</span>
</pre></table></code></div></div><h3 id="assigning-permissions"><span class="me-2">Assigning Permissions</span><a href="#assigning-permissions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>For basic Azure operations, assign the service principal to your subscription:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># Contributor role (can create/manage resources)</span>
az role assignment create <span class="nt">--assignee</span> YOUR_CLIENT_ID <span class="nt">--role</span> Contributor <span class="nt">--scope</span> /subscriptions/YOUR_SUBSCRIPTION_ID

<span class="c"># Or Reader role (read-only access)</span>
az role assignment create <span class="nt">--assignee</span> YOUR_CLIENT_ID <span class="nt">--role</span> Reader <span class="nt">--scope</span> /subscriptions/YOUR_SUBSCRIPTION_ID
</pre></table></code></div></div><p>You can also assign roles through the Azure Portal:</p><ol><li>Go to your <strong>Subscription</strong> &gt; <strong>Access control (IAM)</strong> &gt; <strong>Add role assignment</strong><li>Select a role (e.g., Contributor or Reader)<li>Search for your service principal name and assign it</ol><p>Now you have the three values needed: <strong>Tenant ID</strong>, <strong>Client ID</strong>, and <strong>Client Secret</strong>.</p><h3 id="step-1-store-your-service-principal-credentials"><span class="me-2">Step 1: Store Your Service Principal Credentials</span><a href="#step-1-store-your-service-principal-credentials" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>First, let’s create a helper function to securely store service principal profiles. Add this to your PowerShell session by copying and pasting it in:</p><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="kr">function</span><span class="w"> </span><span class="nf">Add-AzureServicePrincipalProfile</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="kr">param</span><span class="p">(</span><span class="w">
        </span><span class="p">[</span><span class="n">Parameter</span><span class="p">(</span><span class="n">Mandatory</span><span class="p">)]</span><span class="w">
        </span><span class="p">[</span><span class="n">string</span><span class="p">]</span><span class="nv">$ProfileName</span><span class="p">,</span><span class="w">
        
        </span><span class="p">[</span><span class="n">Parameter</span><span class="p">(</span><span class="n">Mandatory</span><span class="p">)]</span><span class="w">
        </span><span class="p">[</span><span class="n">string</span><span class="p">]</span><span class="nv">$TenantId</span><span class="p">,</span><span class="w">
        
        </span><span class="p">[</span><span class="n">Parameter</span><span class="p">(</span><span class="n">Mandatory</span><span class="p">)]</span><span class="w">
        </span><span class="p">[</span><span class="n">string</span><span class="p">]</span><span class="nv">$ClientId</span><span class="p">,</span><span class="w">
        
        </span><span class="p">[</span><span class="n">Parameter</span><span class="p">(</span><span class="n">Mandatory</span><span class="p">)]</span><span class="w">
        </span><span class="p">[</span><span class="n">string</span><span class="p">]</span><span class="nv">$ClientSecret</span><span class="w">
    </span><span class="p">)</span><span class="w">
    
    </span><span class="nv">$azureDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">USERPROFILE</span><span class="s2">\.azure"</span><span class="w">
    </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="o">-not</span><span class="w"> </span><span class="p">(</span><span class="n">Test-Path</span><span class="w"> </span><span class="nv">$azureDir</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">New-Item</span><span class="w"> </span><span class="nt">-ItemType</span><span class="w"> </span><span class="nx">Directory</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="nv">$azureDir</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Out-Null</span><span class="w">
    </span><span class="p">}</span><span class="w">
    
    </span><span class="nv">$secureSecret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ConvertTo-SecureString</span><span class="w"> </span><span class="nv">$ClientSecret</span><span class="w"> </span><span class="nt">-AsPlainText</span><span class="w"> </span><span class="nt">-Force</span><span class="w">
    </span><span class="nv">$credential</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">New-Object</span><span class="w"> </span><span class="nx">System.Management.Automation.PSCredential</span><span class="p">(</span><span class="nv">$ClientId</span><span class="p">,</span><span class="w"> </span><span class="nv">$secureSecret</span><span class="p">)</span><span class="w">
    
    </span><span class="nv">$credPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"</span><span class="nv">$azureDir</span><span class="s2">\sp-</span><span class="nv">$ProfileName</span><span class="s2">-credential.xml"</span><span class="w">
    </span><span class="nv">$tenantPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"</span><span class="nv">$azureDir</span><span class="s2">\sp-</span><span class="nv">$ProfileName</span><span class="s2">-tenant.txt"</span><span class="w">
    
    </span><span class="nv">$credential</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Export-Clixml</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="nv">$credPath</span><span class="w">
    </span><span class="n">Set-Content</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="nv">$tenantPath</span><span class="w"> </span><span class="nt">-Value</span><span class="w"> </span><span class="nv">$TenantId</span><span class="w">
    
    </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"✓ Profile '</span><span class="nv">$ProfileName</span><span class="s2">' saved successfully"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Green</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>Now store your service principal(s):</p><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c"># Store your default service principal</span><span class="w">
</span><span class="n">Add-AzureServicePrincipalProfile</span><span class="w"> </span><span class="se">`
</span><span class="w">    </span><span class="nt">-ProfileName</span><span class="w"> </span><span class="s2">"default"</span><span class="w"> </span><span class="se">`
</span><span class="w">    </span><span class="nt">-TenantId</span><span class="w"> </span><span class="s2">"your-tenant-id"</span><span class="w"> </span><span class="se">`
</span><span class="w">    </span><span class="nt">-ClientId</span><span class="w"> </span><span class="s2">"your-client-id"</span><span class="w"> </span><span class="se">`
</span><span class="w">    </span><span class="nt">-ClientSecret</span><span class="w"> </span><span class="s2">"your-client-secret"</span><span class="w">

</span><span class="c"># Optional: Store additional profiles for different environments</span><span class="w">
</span><span class="n">Add-AzureServicePrincipalProfile</span><span class="w"> </span><span class="se">`
</span><span class="w">    </span><span class="nt">-ProfileName</span><span class="w"> </span><span class="s2">"production"</span><span class="w"> </span><span class="se">`
</span><span class="w">    </span><span class="nt">-TenantId</span><span class="w"> </span><span class="s2">"prod-tenant-id"</span><span class="w"> </span><span class="se">`
</span><span class="w">    </span><span class="nt">-ClientId</span><span class="w"> </span><span class="s2">"prod-client-id"</span><span class="w"> </span><span class="se">`
</span><span class="w">    </span><span class="nt">-ClientSecret</span><span class="w"> </span><span class="s2">"prod-client-secret"</span><span class="w">
</span></pre></table></code></div></div><p>The credentials are now stored encrypted in <code class="language-plaintext highlighter-rouge">~/.azure/</code> and can only be accessed by your Windows user account.</p><h3 id="step-2-configure-your-powershell-profile"><span class="me-2">Step 2: Configure Your PowerShell Profile</span><a href="#step-2-configure-your-powershell-profile" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Edit your PowerShell profile, make sure to update the <code class="language-plaintext highlighter-rouge">-ProfileName</code> parameter if you used a different name than “default”:</p><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">notepad</span><span class="w"> </span><span class="bp">$PROFILE</span><span class="w">
</span></pre></table></code></div></div><p>Add the following code:</p><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
</pre><td class="rouge-code"><pre><span class="c"># ============================================</span><span class="w">
</span><span class="c"># Azure Authentication Management</span><span class="w">
</span><span class="c"># ============================================</span><span class="w">

</span><span class="kr">function</span><span class="w"> </span><span class="nf">Connect-AzureServicePrincipal</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="kr">param</span><span class="p">(</span><span class="w">
        </span><span class="p">[</span><span class="n">string</span><span class="p">]</span><span class="nv">$ProfileName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"default"</span><span class="w">
    </span><span class="p">)</span><span class="w">
    
    </span><span class="nv">$credPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">USERPROFILE</span><span class="s2">\.azure\sp-</span><span class="nv">$ProfileName</span><span class="s2">-credential.xml"</span><span class="w">
    </span><span class="nv">$tenantPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"</span><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">USERPROFILE</span><span class="s2">\.azure\sp-</span><span class="nv">$ProfileName</span><span class="s2">-tenant.txt"</span><span class="w">
    
</span><span class="kr">if</span><span class="w"> </span><span class="p">((</span><span class="n">Test-Path</span><span class="w"> </span><span class="nv">$credPath</span><span class="p">)</span><span class="w"> </span><span class="o">-and</span><span class="w"> </span><span class="p">(</span><span class="n">Test-Path</span><span class="w"> </span><span class="nv">$tenantPath</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nv">$credential</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Import-Clixml</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="nv">$credPath</span><span class="w">
        </span><span class="nv">$tenantId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get-Content</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="nv">$tenantPath</span><span class="w">
        
        </span><span class="c"># For Azure PowerShell</span><span class="w">
        </span><span class="n">Connect-AzAccount</span><span class="w"> </span><span class="nt">-ServicePrincipal</span><span class="w"> </span><span class="nt">-Credential</span><span class="w"> </span><span class="nv">$credential</span><span class="w"> </span><span class="nt">-Tenant</span><span class="w"> </span><span class="nv">$tenantId</span><span class="w"> </span><span class="nt">-WarningAction</span><span class="w"> </span><span class="nx">SilentlyContinue</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Out-Null</span><span class="w">
        
        </span><span class="c"># For Az CLI</span><span class="w">
        </span><span class="nv">$clientSecret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$credential</span><span class="o">.</span><span class="nf">GetNetworkCredential</span><span class="p">()</span><span class="o">.</span><span class="nf">Password</span><span class="w">
        </span><span class="nx">az</span><span class="w"> </span><span class="nx">login</span><span class="w"> </span><span class="nt">--service-principal</span><span class="w"> </span><span class="nt">-u</span><span class="w"> </span><span class="nv">$credential</span><span class="o">.</span><span class="nf">UserName</span><span class="w"> </span><span class="nt">-p</span><span class="w"> </span><span class="nv">$clientSecret</span><span class="w"> </span><span class="nt">--tenant</span><span class="w"> </span><span class="nv">$tenantId</span><span class="w"> </span><span class="nt">--output</span><span class="w"> </span><span class="nx">none</span><span class="w">
        
        </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"✓ Connected to Azure as Service Principal (</span><span class="nv">$ProfileName</span><span class="s2">)"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Green</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"✗ Profile '</span><span class="nv">$ProfileName</span><span class="s2">' not found"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Red</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="kr">function</span><span class="w"> </span><span class="nf">Connect-AzureInteractive</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c"># Sign in with your personal account interactively</span><span class="w">
    </span><span class="n">Connect-AzAccount</span><span class="w"> </span><span class="nt">-WarningAction</span><span class="w"> </span><span class="nx">SilentlyContinue</span><span class="w">
    </span><span class="n">az</span><span class="w"> </span><span class="nx">login</span><span class="w">
    </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"✓ Connected to Azure interactively"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Green</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="kr">function</span><span class="w"> </span><span class="nf">Show-AzureAccounts</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"</span><span class="se">`n</span><span class="s2">=== Azure PowerShell Context ==="</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Cyan</span><span class="w">
    </span><span class="n">Get-AzContext</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Format-List</span><span class="w"> </span><span class="nx">Name</span><span class="p">,</span><span class="w"> </span><span class="nx">Account</span><span class="p">,</span><span class="w"> </span><span class="nx">Subscription</span><span class="p">,</span><span class="w"> </span><span class="nx">Tenant</span><span class="w">
    
    </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"</span><span class="se">`n</span><span class="s2">=== Az CLI Account ==="</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Cyan</span><span class="w">
    </span><span class="n">az</span><span class="w"> </span><span class="nx">account</span><span class="w"> </span><span class="nx">show</span><span class="w"> </span><span class="nt">-o</span><span class="w"> </span><span class="nx">table</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="kr">function</span><span class="w"> </span><span class="nf">Disconnect-Azure</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">Disconnect-AzAccount</span><span class="w"> </span><span class="nt">-WarningAction</span><span class="w"> </span><span class="nx">SilentlyContinue</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Out-Null</span><span class="w">
    </span><span class="nx">az</span><span class="w"> </span><span class="nx">logout</span><span class="w"> </span><span class="nx">2</span><span class="err">&gt;</span><span class="bp">$null</span><span class="w">
    </span><span class="n">Write-Host</span><span class="w"> </span><span class="s2">"✓ Disconnected from Azure"</span><span class="w"> </span><span class="nt">-ForegroundColor</span><span class="w"> </span><span class="nx">Yellow</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c"># Convenient aliases</span><span class="w">
</span><span class="n">Set-Alias</span><span class="w"> </span><span class="nt">-Name</span><span class="w"> </span><span class="nx">azsp</span><span class="w"> </span><span class="nt">-Value</span><span class="w"> </span><span class="nx">Connect-AzureServicePrincipal</span><span class="w">
</span><span class="n">Set-Alias</span><span class="w"> </span><span class="nt">-Name</span><span class="w"> </span><span class="nx">azint</span><span class="w"> </span><span class="nt">-Value</span><span class="w"> </span><span class="nx">Connect-AzureInteractive</span><span class="w">
</span><span class="n">Set-Alias</span><span class="w"> </span><span class="nt">-Name</span><span class="w"> </span><span class="nx">azshow</span><span class="w"> </span><span class="nt">-Value</span><span class="w"> </span><span class="nx">Show-AzureAccounts</span><span class="w">
</span><span class="n">Set-Alias</span><span class="w"> </span><span class="nt">-Name</span><span class="w"> </span><span class="nx">azlogout</span><span class="w"> </span><span class="nt">-Value</span><span class="w"> </span><span class="nx">Disconnect-Azure</span><span class="w">

</span><span class="c"># Auto-connect with default profile on startup (optional)</span><span class="w">
</span><span class="n">Connect-AzureServicePrincipal</span><span class="w"> </span><span class="nt">-ProfileName</span><span class="w"> </span><span class="s2">"default"</span><span class="w">
</span></pre></table></code></div></div><p>Save and close the file, then reload your profile:</p><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="o">.</span><span class="w"> </span><span class="bp">$PROFILE</span><span class="w">
</span></pre></table></code></div></div><h2 id="how-to-use-it"><span class="me-2">How to Use It</span><a href="#how-to-use-it" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="automatic-sign-in"><span class="me-2">Automatic Sign-In</span><a href="#automatic-sign-in" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>If you leave the last line uncommented, when you launch PowerShell, you’re automatically authenticated to Azure with your default service principal. Both Az CLI and Azure PowerShell are ready to go.</p><h3 id="manual-sign-in-with-different-profiles"><span class="me-2">Manual Sign-In with Different Profiles</span><a href="#manual-sign-in-with-different-profiles" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># Use default profile</span><span class="w">
</span><span class="n">azsp</span><span class="w">

</span><span class="c"># Use specific profile</span><span class="w">
</span><span class="n">azsp</span><span class="w"> </span><span class="nt">-ProfileName</span><span class="w"> </span><span class="s2">"production"</span><span class="w">
</span></pre></table></code></div></div><h3 id="switch-to-interactive-login"><span class="me-2">Switch to Interactive Login</span><a href="#switch-to-interactive-login" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Need to use your personal account instead?</p><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># Sign out from service principal</span><span class="w">
</span><span class="n">azlogout</span><span class="w">

</span><span class="c"># Sign in interactively</span><span class="w">
</span><span class="n">azint</span><span class="w">
</span></pre></table></code></div></div><h3 id="check-current-account"><span class="me-2">Check Current Account</span><a href="#check-current-account" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">azshow</span><span class="w">
</span></pre></table></code></div></div><h3 id="switch-subscriptions"><span class="me-2">Switch Subscriptions</span><a href="#switch-subscriptions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-powershell highlighter-rouge"><div class="code-header"> <span data-label-text="Powershell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># Azure PowerShell</span><span class="w">
</span><span class="n">Set-AzContext</span><span class="w"> </span><span class="nt">-Subscription</span><span class="w"> </span><span class="s2">"subscription-name"</span><span class="w">

</span><span class="c"># Az CLI</span><span class="w">
</span><span class="n">az</span><span class="w"> </span><span class="nx">account</span><span class="w"> </span><span class="nx">set</span><span class="w"> </span><span class="nt">--subscription</span><span class="w"> </span><span class="s2">"subscription-name"</span><span class="w">
</span></pre></table></code></div></div><h2 id="why-this-approach"><span class="me-2">Why This Approach?</span><a href="#why-this-approach" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><strong>Security</strong>: Credentials are encrypted by Windows and only accessible to your user account. No plain text secrets in files or environment variables.</p><p><strong>Convenience</strong>: Automatic authentication on PowerShell startup means you’re always ready to work.</p><p><strong>Flexibility</strong>: Easy switching between multiple service principals or interactive login.</p><p><strong>One Solution</strong>: Works seamlessly with both Az CLI and Azure PowerShell Module.</p><h2 id="quick-command-reference"><span class="me-2">Quick Command Reference</span><a href="#quick-command-reference" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="table-wrapper"><table><thead><tr><th>Command<th>Description<tbody><tr><td><code class="language-plaintext highlighter-rouge">azsp</code><td>Connect with default service principal<tr><td><code class="language-plaintext highlighter-rouge">azsp -ProfileName "prod"</code><td>Connect with specific profile<tr><td><code class="language-plaintext highlighter-rouge">azint</code><td>Interactive login (personal account)<tr><td><code class="language-plaintext highlighter-rouge">azshow</code><td>Show current account info<tr><td><code class="language-plaintext highlighter-rouge">azlogout</code><td>Sign out completely</table></div><h2 id="wrapping-up"><span class="me-2">Wrapping Up</span><a href="#wrapping-up" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Setting up a new machine is always an opportunity to improve your workflows. This authentication setup has made my daily Azure work much smoother.</p><p>If you’re setting up Azure authentication on Windows, give this approach a try. Your future self (and your security team) will thank you.</p><hr /><p><em>Have questions or suggestions? Feel free to reach out or leave a comment below!</em></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/azure/">Azure</a>, <a href="/categories/powershell/">PowerShell</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/powershell/" class="post-tag no-text-decoration" >PowerShell</a> <a href="/tags/authentication/" class="post-tag no-text-decoration" >Authentication</a> <a href="/tags/windows11/" class="post-tag no-text-decoration" >Windows11</a> <a href="/tags/devops/" class="post-tag no-text-decoration" >DevOps</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fcocallaw.com%2Fposts%2FAzure-Auth-on-Windows%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="https://www.reddit.com/submit?url=https%3A%2F%2Fcocallaw.com%2Fposts%2FAzure-Auth-on-Windows%2F&title=Streamlining%20Azure%20CLI%20&%20PowerShell%20Authentication%20on%20Windows%2011%20-%20cocallaw" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Reddit" aria-label="Reddit"> <i class="fa-fw fa-brands fa-square-reddit"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Streamlining%20Azure%20CLI%20&%20PowerShell%20Authentication%20on%20Windows%2011%20-%20cocallaw&u=https%3A%2F%2Fcocallaw.com%2Fposts%2FAzure-Auth-on-Windows%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.threads.net/intent/post?text=Streamlining%20Azure%20CLI%20&%20PowerShell%20Authentication%20on%20Windows%2011%20-%20cocallaw%20https%3A%2F%2Fcocallaw.com%2Fposts%2FAzure-Auth-on-Windows%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Threads" aria-label="Threads"> <i class="fa-fw fa-brands fa-square-threads"></i> </a> <a href="https://bsky.app/intent/compose?text=Streamlining%20Azure%20CLI%20&%20PowerShell%20Authentication%20on%20Windows%2011%20-%20cocallaw%20https%3A%2F%2Fcocallaw.com%2Fposts%2FAzure-Auth-on-Windows%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Bluesky" aria-label="Bluesky"> <i class="fa-fw fa-brands fa-bluesky"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/Proactively-monitor-Azure-retirements-AzRetirementMonitor/">Proactively Monitor Azure Service Retirements with AzRetirementMonitor</a><li class="text-truncate lh-lg"> <a href="/posts/Azure-Auth-on-Windows/">Streamlining Azure CLI & PowerShell Authentication on Windows 11</a><li class="text-truncate lh-lg"> <a href="/posts/Automating-Lets-Encrypt-SSL-Certificates-on-Synology/">Automating Let's Encrypt SSL Certificates on Synology DSM with acme.sh and Cloudflare DNS</a><li class="text-truncate lh-lg"> <a href="/posts/Deploying-AVD-with-Bicep/">Deploying AVD and retrieving the Registration Token with Bicep</a><li class="text-truncate lh-lg"> <a href="/posts/Identify-Legacy-AAD-PS-Users/">Identify AzureAD PowerShell Users in your Tenant before Retirement</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/powershell/">PowerShell</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">Automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/devops/">DevOps</a> <a class="post-tag btn btn-outline-primary" href="/tags/entra/">Entra</a> <a class="post-tag btn btn-outline-primary" href="/tags/images/">images</a> <a class="post-tag btn btn-outline-primary" href="/tags/microsoft-graph/">Microsoft Graph</a> <a class="post-tag btn btn-outline-primary" href="/tags/acme-sh/">acme.sh</a> <a class="post-tag btn btn-outline-primary" href="/tags/authentication/">Authentication</a> <a class="post-tag btn btn-outline-primary" href="/tags/avd/">AVD</a> <a class="post-tag btn btn-outline-primary" href="/tags/azure-virtual-desktop/">Azure Virtual Desktop</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/Proactively-monitor-Azure-retirements-AzRetirementMonitor/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1768323600" data-df="ll" > Jan 13, 2026 </time><h4 class="pt-0 my-2">Proactively Monitor Azure Service Retirements with AzRetirementMonitor</h4><div class="text-muted"><p>Learn how to proactively monitor Azure service retirements across multiple subscriptions using the AzRetirementMonitor PowerShell module, helping you avoid disruptions and maintain compliance.</p></div></div></a></article><article class="col"> <a href="/posts/Identify-Legacy-AAD-PS-Users/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1748365200" data-df="ll" > May 27, 2025 </time><h4 class="pt-0 my-2">Identify AzureAD PowerShell Users in your Tenant before Retirement</h4><div class="text-muted"><p>Microsoft is retiring the legacy AzureAD and MSOnline PowerShell modules. These modules have been widely used for years to manage users, groups, roles, and other directory objects in Azure Active D...</p></div></div></a></article><article class="col"> <a href="/posts/Export-Bitlocker-Keys-from-Entra/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1747044000" data-df="ll" > May 12, 2025 </time><h4 class="pt-0 my-2">Export BitLocker Keys from Entra with Graph PowerShell</h4><div class="text-muted"><p>How to retrieve BitLocker recovery keys from Entra using PowerShell and Microsoft Graph.</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/Automating-Lets-Encrypt-SSL-Certificates-on-Synology/" class="btn btn-outline-primary" aria-label="Older" ><p>Automating Let's Encrypt SSL Certificates on Synology DSM with acme.sh and Cloudflare DNS</p></a> <a href="/posts/Proactively-monitor-Azure-retirements-AzRetirementMonitor/" class="btn btn-outline-primary" aria-label="Newer" ><p>Proactively Monitor Azure Service Retirements with AzRetirementMonitor</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2026</time> <a href="https://github.com/cocallaw">Corey Callaway</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.4.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/powershell/">PowerShell</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">Automation</a> <a class="post-tag btn btn-outline-primary" href="/tags/devops/">DevOps</a> <a class="post-tag btn btn-outline-primary" href="/tags/entra/">Entra</a> <a class="post-tag btn btn-outline-primary" href="/tags/images/">images</a> <a class="post-tag btn btn-outline-primary" href="/tags/microsoft-graph/">Microsoft Graph</a> <a class="post-tag btn btn-outline-primary" href="/tags/acme-sh/">acme.sh</a> <a class="post-tag btn btn-outline-primary" href="/tags/authentication/">Authentication</a> <a class="post-tag btn btn-outline-primary" href="/tags/avd/">AVD</a> <a class="post-tag btn btn-outline-primary" href="/tags/azure-virtual-desktop/">Azure Virtual Desktop</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'cocallaw/cocallaw.github.io', 'data-repo-id': 'R_kgDOMuW1lg', 'data-category': 'Giscus', 'data-category-id': 'DIC_kwDOMuW1ls4CjqPh', 'data-mapping': 'pathname', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
